
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏ –¢–æ–ª–∫–æ–≤–∞—Ç–µ–ª—å –°–Ω–æ–≤</title>
  <meta name="description" content="–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ —Ç–æ–ª–∫–æ–≤–∞–Ω–∏—è —Å–Ω–æ–≤">
  <meta name="theme-color" content="#000000">
  <link rel="manifest" href="/manifest.json">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  <link rel="manifest" crossorigin="use-credentials" href="/manifest.json">
</head>
<body>
  <div class="container">
    <h1>üîÆ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏ –¢–æ–ª–∫–æ–≤–∞—Ç–µ–ª—å –°–Ω–æ–≤</h1>
    <form id="dream-form">
      <textarea id="dream-input" placeholder="–û–ø–∏—à–∏—Ç–µ —Å–≤–æ–π —Å–æ–Ω... –ù–∞–ø—Ä–∏–º–µ—Ä: '–Ø –ª–µ—Ç–µ–ª –Ω–∞ –ø–∏—Ü—Ü–µ –Ω–∞–¥ –≥–æ—Ä–æ–¥–æ–º –∏–∑ –∂–µ–ª–µ'"></textarea>
      <button type="submit">–°–æ–∑–¥–∞—Ç—å —Å–æ–Ω</button>
    </form>

    <div id="result" class="hidden">
      <img id="generated-image" src="" alt="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–æ–Ω" />
      <p id="interpretation-text"></p>
    </div>
  </div>

  <script>
    document.getElementById("dream-form").addEventListener("submit", async function(e) {
      e.preventDefault();
      const input = document.getElementById("dream-input").value;
      const result = document.getElementById("result");
      const image = document.getElementById("generated-image");
      const text = document.getElementById("interpretation-text");
      result.classList.add("hidden");
      image.src = ""
      text.textContent = ""
      const response = await fetch("/generate", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ dream: input })
      });

      const data = await response.json();
      image.src = "http://127.0.0.1:5000/static/image.jpg?" + new Date().getTime()
      text.textContent = data.interpretation;
      result.classList.remove("hidden");
    });
  </script>
</body>
</html>